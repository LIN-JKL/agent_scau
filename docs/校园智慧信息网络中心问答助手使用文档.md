# 校园智慧信息网络中心问答助手使用文档

## 一、功能概述

本校园智慧信息网络中心问答助手是一个基于Python的Web应用，为用户提供校园网络服务相关问题的智能回答。增强版主要特点：

1. 完全移除了`open`函数的使用，避免环境限制
2. 采用校园绿色主题，提供清新、可爱的界面设计
3. 添加动态卡片功能，支持内容展开/折叠
4. 丰富的动画效果和交互体验
5. 响应式设计，支持各种设备访问
6. 支持与现有工作流集成

## 二、文件说明

### 主要文件
- **校园智慧信息网络中心问答助手_python增强版.py**：增强版主程序文件，包含完整的问答功能和改进的界面设计
- **校园智慧信息网络中心问答助手使用文档.md**：本使用文档

## 三、安装与运行

### 系统要求
- Python 3.6+（推荐3.8及以上版本）
- 无需额外依赖库（使用Python标准库）

### 运行步骤

1. 确保您的系统已安装Python
2. 打开命令提示符或终端
3. 导航到程序所在目录：
   ```
   cd d:\智能体比赛
   ```
4. 运行增强版程序：
   ```
   python 校园智慧信息网络中心问答助手_python增强版.py
   ```
5. 程序启动成功后，在浏览器中访问：
   ```
   http://127.0.0.1:5000
   ```

## 四、主要功能介绍

### 1. 聊天界面

- 左侧显示常见问题分类列表，点击问题可快速发送
- 右侧为聊天区域，显示用户与助手的对话
- 底部为输入框，支持文本输入和发送

### 2. 动态卡片功能

当助手回答关于"固定IP申请流程"的问题时，会自动生成可交互的动态卡片：
- 点击卡片标题可展开/折叠详细内容
- 展开时会有平滑的动画效果
- 卡片中包含完整的申请步骤和当前处理状态
- 显示实时进度条和排队人数信息

### 3. 知识库与常见问题

系统内置了常见问题和知识库数据，包括：
- 账号服务：账号申请、查询、修改和注销
- 网络服务：校园网接入、故障报修、固定IP申请
- 新生服务：网络开通、账号激活指南
- 技术服务：系统和设备的技术支持

## 五、与工作流集成

### API封装方法

本问答助手提供了RESTful API接口，可以轻松集成到您现有的工作流中：

#### API端点
- **POST /api/query**：处理用户查询并返回回答

#### 请求格式
```json
{
  "query": "用户的问题内容"
}
```

#### 响应格式
```json
{
  "response": "助手的回答内容"
}
```

### 工作流集成步骤

1. **保持问答助手服务器运行**
   - 首先启动增强版问答助手服务器
   - 确保服务器监听在`http://127.0.0.1:5000`

2. **在现有工作流中添加API调用**
   - 在您的AI工作流中，添加一个HTTP请求节点
   - 设置请求URL为：`http://127.0.0.1:5000/api/query`
   - 设置请求方法为：`POST`
   - 设置请求头：`Content-Type: application/json`
   - 构造请求体，将用户输入作为`query`参数

3. **处理API响应**
   - 接收API返回的JSON响应
   - 提取`response`字段的值作为助手回答
   - 将回答返回给用户界面展示

### 代码示例（工作流中集成）

以下是在工作流中集成API调用的示例代码：

```javascript
// 假设这是在工作流中的JavaScript代码
async function getAssistantResponse(userQuery) {
    try {
        // 调用本地问答助手API
        const response = await fetch('http://127.0.0.1:5000/api/query', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ query: userQuery })
        });
        
        const data = await response.json();
        return data.response; // 返回助手回答
    } catch (error) {
        console.error('API调用错误:', error);
        // 可以在这里设置回退逻辑，比如使用备用的AI模型
        return '抱歉，暂时无法获取响应，请稍后再试。';
    }
}
```

## 六、自定义与扩展

### 修改知识库内容

如果需要更新或扩展知识库内容，可以修改`init_data()`函数中的相关数据：

```python
# 加载知识库数据
knowledge_base = {
    "账号服务": "提供校园网账号、电子邮箱账号等各类账号的申请、查询、修改和注销等服务。",
    "网络服务": "提供校园网接入、网络故障报修、固定IP申请等服务。",
    # 可以在这里添加更多知识库条目
}
```

### 修改常见问题

```python
# 预设的常见问题
faqs = [
    {"id": 1, "question": "如何申请校园网账号？", "category": "账号服务"},
    # 可以在这里添加更多常见问题
]
```

### 修改响应内容

```python
# 预设的响应
responses = {
    "校园网账号": "校园网账号申请流程：1. 访问信息网络中心官网；...",
    # 可以在这里添加更多预设响应
}
```

### 添加新的动态卡片

要为其他问题添加动态卡片功能，可以修改`addMessage`函数中的条件判断：

```javascript
// 检查内容是否包含特定关键词，添加动态卡片
if (!isUser && content.includes('特定关键词')) {
    // 添加新的动态卡片HTML
    const cardHtml = `
        <div class="dynamic-card" onclick="toggleCard(this)">
            <div class="card-header">
                📌 卡片标题
                <span class="card-arrow">▼</span>
            </div>
            <div class="card-content hidden">
                <!-- 卡片内容 -->
            </div>
        </div>
    `;
    contentDiv.innerHTML = cardHtml;
} else {
    contentDiv.textContent = content;
}
```

## 七、常见问题与解决方案

### 1. 端口冲突问题

如果启动时提示端口已被占用，可以修改代码中的端口号：

```python
# 修改端口号为未被占用的端口
port = 5001  # 或其他可用端口
```

### 2. 浏览器无法访问

- 确认服务器是否已成功启动
- 检查防火墙设置，确保允许该端口的访问
- 尝试使用不同的浏览器

### 3. API调用失败

- 确认问答助手服务器是否正在运行
- 检查请求URL和请求格式是否正确
- 查看浏览器控制台或服务器日志获取详细错误信息

### 4. 界面样式问题

- 清除浏览器缓存后重新加载页面
- 确保使用的是现代浏览器（Chrome、Firefox、Edge等）
- 对于移动设备，可能需要调整屏幕方向以获得最佳体验

## 八、注意事项

1. 本程序使用Python标准库开发，无需安装额外依赖
2. 程序完全移除了对`open`函数的使用，避免了环境限制
3. 确保在运行前关闭占用相同端口的其他程序
4. 程序支持异步和传统两种运行模式，可适应不同的环境要求
5. 如需在生产环境使用，建议添加更多的安全措施和错误处理

## 九、更新日志

### 增强版更新内容

1. **界面改进**
   - 采用校园绿色主题设计
   - 添加渐变背景和装饰元素
   - 优化按钮、输入框等UI组件样式
   - 增加卡片、按钮的交互动画

2. **功能增强**
   - 添加动态展开/折叠卡片功能
   - 增加消息进入动画效果
   - 添加随机生成的处理状态信息
   - 实现响应式设计，支持移动设备

3. **代码优化**
   - 完全移除`open`函数的使用
   - 优化异步和同步运行模式的兼容性
   - 改进错误处理机制
   - 提高代码的可维护性和可扩展性

---

希望本使用文档能帮助您顺利使用和扩展校园智慧信息网络中心问答助手。如有任何问题或建议，请随时联系技术支持。